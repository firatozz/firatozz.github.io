var canvas=document.getElementById("game"),context=canvas.getContext("2d"),grid=16,count=0,score=0,speed_value=8,snakeX=160,snakeY=160,snakeDX=grid,snakeDY=0,snakeCells=[],snakeMaxCells=4,food={x:320,y:320};function snake_reset(){snakeX=160,snakeY=160,snakeCells=[],snakeMaxCells=4,snakeDX=grid,snakeDY=0,food.x=getRandomInt(0,25)*grid,food.y=getRandomInt(0,25)*grid,score=0,document.getElementById("score1").innerHTML=score}function getRandomInt(e,n){return Math.floor(Math.random()*(n-e))+e}function loop(){requestAnimationFrame(loop),++count<speed_value||(count=0,context.clearRect(0,0,canvas.width,canvas.height),snakeY+=snakeDY,(snakeX+=snakeDX)<0?snakeX=canvas.width-grid:snakeX>=canvas.width&&(snakeX=0),snakeY<0?snakeY=canvas.height-grid:snakeY>=canvas.height&&(snakeY=0),snakeCells.unshift({x:snakeX,y:snakeY}),snakeCells.length>snakeMaxCells&&snakeCells.pop(),context.fillStyle="red",context.fillRect(food.x,food.y,grid-1,grid-1),context.fillStyle="green",snakeCells.forEach(function(e,n){context.fillRect(e.x,e.y,grid-1,grid-1),e.x===food.x&&e.y===food.y&&(snakeMaxCells++,score+=10,document.getElementById("score1").innerHTML=score,food.x=getRandomInt(0,25)*grid,food.y=getRandomInt(0,25)*grid),score>=50&&(speed_value=6),score>=100&&(speed_value=4);for(var a=n+1;a<snakeCells.length;a++)e.x===snakeCells[a].x&&e.y===snakeCells[a].y&&snake_reset()}))}document.addEventListener("keydown",function(e){37!==e.which&&65!==e.which||0!==snakeDX?38!==e.which&&87!==e.which||0!==snakeDY?39!==e.which&&68!=e.which||0!==snakeDX?40!==e.which&&83!=e.which||0!==snakeDY||(snakeDY=grid,snakeDX=0):(snakeDX=grid,snakeDY=0):(snakeDY=-grid,snakeDX=0):(snakeDX=-grid,snakeDY=0)}),requestAnimationFrame(loop);